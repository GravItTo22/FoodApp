<!-- Wappler include head-page="layouts/main" fontawesome_5="cdn" bootstrap5="local" is="dmx-app" id="placeorder" appConnect="local" components="{dmxBootstrap5Modal:{}}" -->
<meta name="ac:route" content="/place-order">
<dmx-serverconnect id="scCartItems" url="/api/Cart/CartItems"></dmx-serverconnect>
<!-- <dmx-serverconnect id="scAppliedCode" url="/api/Cart/FetchPromoCode"></dmx-serverconnect> -->
<dmx-serverconnect id="scGetShippingAddress" url="/api/Users/ShippingAddress"></dmx-serverconnect>
<dmx-serverconnect id="scUpShippingStatus" noload url="/api/Users/UpStatusShippingAdd" dmx-on:success="scGetShippingAddress.load({},true)"></dmx-serverconnect>
<dmx-value id="varShippingId" dmx-bind:value=""></dmx-value>
<dmx-value id="varMobile" dmx-bind:value=""></dmx-value>
<dmx-value id="varPin" dmx-bind:value=""></dmx-value>
<dmx-value id="varFullName" dmx-bind:value=""></dmx-value>
<dmx-value id="varEmail" dmx-bind:value=""></dmx-value>
<dmx-value id="varHouseNoLane" dmx-bind:value=""></dmx-value>
<dmx-value id="varAddress" dmx-bind:value=""></dmx-value>
<dmx-value id="varDistrict" dmx-bind:value=""></dmx-value>
<dmx-value id="varUserWallet" dmx-bind:value="0"></dmx-value>
<dmx-value id="varPaymentMode" dmx-bind:value="'COD'"></dmx-value>
<dmx-serverconnect id="scUseWallet" url="/api/Cart/WalletBalanceApply" dmx-param:use_wallet_amount="formPlaceorder.use_wallet_amount.value" noload dmx-on:success="varUserWallet.setValue((content.scUseWallet.data.status == 200)?formPlaceorder.use_wallet_amount.value:0)"></dmx-serverconnect>
<script is="dmx-flow" id="flowUseWalletBal" type="text/dmx-flow">{
  condition: {
    if: "{{formPlaceorder.use_wallet_amount.value}}",
    then: {
      steps: {
        run: {
          action: "{{scUseWallet.load({use_wallet_amount: formPlaceorder.use_wallet_amount.value})}}"
        }
      }
    }
  }
}</script>
<!-- Breadcrumb Section Begin -->
<section class="breadcrumb-section set-bg" data-setbg="assets/img/breadcrumb.jpg">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <div class="breadcrumb__text">
                    <h2>Checkout</h2>
                    <div class="breadcrumb__option">
                        <a href="/">Home</a>
                        <span>Checkout</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<section class="checkout spad">
    <div class="container">
        <div class="row">
            <div class="checkout__form mt-3">
                <h4>Billing Details</h4>
                <div class="col-lg-12">
                    <h6> Delivery to:<b> {{content.scGetShippingAddress.data.ActiveAddress.full_name}}, {{content.scGetShippingAddress.data.ActiveAddress.pin}}</b><br>
                        {{content.scGetShippingAddress.data.ActiveAddress.address1}} <i>{{content.scGetShippingAddress.data.ActiveAddress.district}}, {{content.scGetShippingAddress.data.ActiveAddress.state}}</i>
                        <!-- Button trigger modal -->
                        <button type="button" class="btn btn-light border-dark float-right mb-3" data-toggle="modal" data-target="#exampleModalLong">
                            Change
                        </button>
                    </h6>
                    <!-- Modal -->
                    <div class="modal fade" id="exampleModalLong" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
                        <div class="modal-dialog1" role="document">
                            <div class="modal-content1 p-3">
                                <h5 class="modal-title" id="exampleModalLongTitle"></h5>
                                <div class="modal-header1">
                                    <p class="font-weight-bold">Select Delivery Address</p>
                                    <div class="ShippingAddress">
                                        <div class="container1" dmx-repeat:repeat2="scGetShippingAddress.data.GetAddress">
                                            <label class="form-check-label"><b>{{scGetShippingAddress.data.GetAddress[$index].full_name}},</b> <i>{{scGetShippingAddress.data.GetAddress[$index].mobile}},</i> {{scGetShippingAddress.data.GetAddress[$index].pin}}
                                                <br> {{scGetShippingAddress.data.GetAddress[$index].address1}} <i>{{scGetShippingAddress.data.GetAddress[$index].district}}, {{scGetShippingAddress.data.GetAddress[$index].state}}</i></label>
                                            <input type="radio" dmx-bind:checked="(content.scGetShippingAddress.data.GetAddress[$index].status==2)?'checked':''" name="radio">
                                            <span class="checkmark" dmx-on:click="scUpShippingStatus.load({shipping_id: scGetShippingAddress.data.GetAddress[$index].id});varShippingId.setValue(scGetShippingAddress.data.GetAddress[$index].id);varMobile.setValue(scGetShippingAddress.data.GetAddress[$index].mobile);varPin.setValue(scGetShippingAddress.data.GetAddress[$index].pin);varFullName.setValue(scGetShippingAddress.data.GetAddress[$index].full_name);varEmail.setValue(scGetShippingAddress.data.GetAddress[$index].email_id);varAddress.setValue(scGetShippingAddress.data.GetAddress[$index].address1);varHouseNoLane.setValue(scGetShippingAddress.data.GetAddress[$index].housenolane);varDistrict.setValue(scGetShippingAddress.data.GetAddress[$index].district)"></span>
                                        </div>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="hidden" name="inlineRadioOptions" id="inlineRadio1" value="option1">

                                    </div>
                                    <p>Add/ Edit Shipping Address:</p>
                                    <form is="dmx-serverconnect-form" method="post" id="scformShippingAddress" action="/api/Users/AddShippingAddress" dmx-on:success="notifMain.success(content.scformShippingAddress.data);scformShippingAddress.reset();scGetShippingAddress.load({});varShippingId.setValue();varMobile.setValue();varPin.setValue();varFullName.setValue();varEmail.setValue();varAddress.setValue();varHouseNoLane.setValue();varDistrict.setValue()" dmx-on:forbidden="notifMain.warning(lastError.response)" dmx-on:unauthorized="notifMain.warning(lastError.response)">
                                        <input type="hidden" name="ShippingId" class="form-control mb-2" dmx-bind:value="varShippingId.value">
                                        <input type="number" name="mobile" class="form-control mb-2" placeholder="Mobile Number *" required="" dmx-bind:value="varMobile.value">
                                        <input type="number" name="pincode" class="form-control mb-2" placeholder="Enter Your Pin Code *" required="" dmx-bind:value="varPin.value">
                                        <input type="text" name="name" class="form-control mb-2" placeholder="Enter Full Name *" required="" dmx-bind:value="varFullName.value">
                                        <input type="text" name="Email" class="form-control mb-2" placeholder="Email Id" dmx-bind:value="varEmail.value">
                                        <input type="text" name="housenolane" class="form-control mb-2" placeholder="House No, Lane/ Road" dmx-bind:value="varHouseNoLane.value">
                                        <input type="text" name="address" class="form-control mb-2" placeholder="Address *" required="" dmx-bind:value="varAddress.value">
                                        <input type="text" name="district" class="form-control mb-2" placeholder="District *" required="" dmx-bind:value="varDistrict.value">
                                        <input type="submit" value="Submit" class="btn btns w-25">
                                        <input type="button" value="Close" class="btn btn-dark w-25 pull-right text-center mt-2" data-bs-dismiss="modal" aria-label="Close" dmx-on:click="browserMain.goto('/place-order')">
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <form id="formPlaceorder" is="dmx-serverconnect-form" method="post" action="/api/Cart/PlaceOrder" dmx-on:success="(content.formPlaceorder.data.Status==200)?notifMain.success(content.formPlaceorder.data.Message):(content.formPlaceorder.data.Status==201)?browserMain.goto(formPlaceorder.data.Url):''" dmx-on:unauthorized="notifMain.success(lastError.response)" dmx-on:forbidden="notifMain.success(lastError.response);">
                    <div class="row mt-5">
                        <div class="col-lg-7 col-md-6" style="background: #f5f5f5;
                            padding: 40px;">
                            <h4><b>Select Payment Method</b></h4>

                            <div class="card">
                                <div class="card-body px-0">
                                    <h5 class="text-info">Cash On Delivery (COD)</h5>
                                    <div class="mt-3">
                                        <p>Rs. 10 Will be Charged Extra</p>
                                          <input type="radio" name="payment_mode" dmx-bind:value="(varPaymentMode.value=='COD')?'COD':'PayOnline'" dmx-on:click="varPaymentMode.setValue('COD')">
                                          <label for="payment_mode">COD</label><br>
                                          <input type="radio" name="payment_mode" dmx-bind:value="(varPaymentMode.value=='PayOnline')?'PayOnline':'COD'" dmx-on:click="varPaymentMode.setValue('PayOnline')">
                                          <label for="payment_mode">Pay Online</label><br>
                                    </div>
                                </div>
                            </div>

                            <!-- discount code part -->
                            <div class="discount_code mt-3">
                                <div class="card">
                                    <div class="d-flex justify-content-between font-weight-bold" dmx-hide="scDashboardInfo.data.varLogin">
                                        <p>Please Login to Use Wallet Cashback, Use Wallet Balance and Instant Discount (If Any)</p>
                                    </div>
                                    <div class="card-body px-0" dmx-show="scDashboardInfo.data.varLogin">
                                        <h5 class="text-info">Use your wallet balance (optional)</h5>
                                        <h6 dmx-class:text-danger="content.scUseWallet.data.status==400" dmx-class:text-success="content.scUseWallet.data.status==200">{{content.scUseWallet.data.message}}</h6>
                                        <div class="mt-3">
                                            <input type="number" id="use_wallet_amount" class="form-control font-weight-bold" placeholder="Enter the Amount">
                                        </div>
                                        <button class="btn1 btn-sm mt-3" dmx-on:click="flowUseWalletBal.run();">Apply</button>
                                    </div>
                                </div>
                            </div>
                            <div class="card mt-3 p-3 ">
                                <p>Note: If the delivery address is more than 10 Kms than an extra Rs 30 will be charged per delivery</p>
                            </div>
                        </div>
                        <div class="col-lg-5 col-md-6">
                            <div class="checkout__order">
                                <h4>Your Order</h4>
                                <div class="checkout__order__subtotal">Amount <span><i class="fa fa-rupee"></i>{{content.scCartItems.data.CartSumAmt[0].total_amt.toFixed(2)}}</span></div>

                                <input type="hidden" id="inp_product_total_amt" dmx-bind:value="content.scCartItems.data.CartSumAmt[0].total_amt">
                                <input type="hidden" id="inp_shipping_charge" dmx-bind:value="content.scCartItems.data.ShippingCharge">
                                <input type="hidden" id="inp_other_charge" dmx-bind:value="content.scCartItems.data.OtherCharges">
                                <input type="hidden" id="inp_wallet_amt" name="inp_wallet_amt" dmx-bind:value="varUserWallet.value">
                                <input type="hidden" id="inp_instant_discount" dmx-bind:value="content.scCartItems.data.InstantDiscount">


                                <div class="price_indiv d-flex justify-content-between mx-0">
                                    <p>Shipping Charge</p>
                                    <p>(+) <i class=" fa fa-rupee"></i><span id="shipping_charge">{{content.scCartItems.data.ShippingCharge.toFixed(2)}}</span></p>
                                </div>
                                <div class="price_indiv d-flex justify-content-between mx-0">
                                    <p>Other Charges <br /><span class="gio-font-11">7% (GST + Packaging)</span></p>
                                    <p>(+) <i class=" fa fa-rupee"></i><span id="other_charge">{{content.scCartItems.data.OtherCharges.toFixed(2)}}</span></p>
                                </div>
                                <div class="price_indiv d-flex justify-content-between mx-0">
                                    <p>Instant Discount <br /><span class="gio-font-11">(Auto Apply Promo Code: <b>{{content.scCartItems.data.NewUserCode.promo_code}}</b>)</span></p>
                                    <p>(-) <i class=" fa fa-rupee"></i><span id="instant_discount">{{(content.scCartItems.data.Apply=='Yes')?content.scCartItems.data.InstantDiscount.toFixed(2):'0.00'}}</span></p>
                                </div>
                                <hr />
                                <div class="price_indiv d-flex justify-content-between mx-0" dmx-show="(content.scUseWallet.data.status == 200)" dmx-hide="(content.scUseWallet.data.status==400)">
                                    <p class="text-primary">Wallet Balance Amount</p>
                                    <p class="text-primary">(-) <i class=" fa fa-rupee"></i><span id="wall_bal_amt">{{varUserWallet.value}}</span></p>
                                </div>
                                <hr dmx-show="content.scUseWallet.data.status == 200" dmx-hide="content.scUseWallet.data.status == 400" />

                                <div class="checkout__order__total">Total <span><i class="fa fa-rupee"></i>{{((inp_product_total_amt.value.toNumber()+inp_shipping_charge.value.toNumber()+inp_other_charge.value.toNumber())-inp_instant_discount.value.toNumber()-inp_wallet_amt.value.toNumber()).toFixed(2)}}</span></div>

                                <div class="d-flex justify-content-between font-weight-bold" dmx-show="scDashboardInfo.data.varLogin">
                                    <p class="text-info font-weight-bold">Wallet Cashback</p>
                                    <p class="text-info font-weight-bold"><i class=" fa fa-rupee"></i><span id="total_cashback_amt">{{(content.scCartItems.data.Apply=='Yes')?content.scCartItems.data.WalletCashback.toFixed(2):'0.00'}}</span></p>
                                </div>
                                <p class="gio-font-11">(Additional Auto Apply Promo Code Cashback: <b>{{content.scCartItems.data.NewUserCode.promo_code}}</b>)</p>

                                <div class="d-flex justify-content-between font-weight-bold" dmx-hide="scDashboardInfo.data.varLogin">
                                    <p>Please Login to get Wallet Cashback (Discount Amount) <a href="/login" class="text-primary font-weight-bold">Login</a></p>
                                </div>

                                <p>I have read out the cancellation and return policy and I agree with the terms and condition of Gravitto.</p>
                                <button type="submit" class="site-btn" dmx-class:disabled="state.executing" dmx-bind:disabled="state.executing">PLACE ORDER &emsp;<span class="spinner-border spinner-border-sm" role="status" dmx-show="state.executing"></span></button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>
<section class="featured spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="section-title">
                    <h2>Wishlist</h2>
                </div>
            </div>
        </div>
        <div class="row featured__filter">
            <div class="col-lg-3 col-md-4 col-sm-6 mix oranges fresh-meat">
                <div class="featured__item">
                    <div class="featured__item__pic set-bg" data-setbg="assets/img/featured/feature-1.jpg">
                        <ul class="featured__item__pic__hover">
                            <li><a href="#"><i class="fa fa-retweet"></i></a></li>
                            <li><a href="#"><i class="fa fa-shopping-cart"></i></a></li>
                        </ul>
                    </div>
                    <div class="featured__item__text">
                        <h6><a href="#">Rajma with Jeera Rice Pulao Meal</a></h6>
                        <h5><i class="fa fa-rupee"></i>30.00</h5>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6 mix vegetables fastfood">
                <div class="featured__item">
                    <div class="featured__item__pic set-bg" data-setbg="assets/img/featured/feature-2.jpg">
                        <ul class="featured__item__pic__hover">
                            <li><a href="#"><i class="fa fa-retweet"></i></a></li>
                            <li><a href="#"><i class="fa fa-shopping-cart"></i></a></li>
                        </ul>
                    </div>
                    <div class="featured__item__text">
                        <h6><a href="#">Chilli Paneer Dry</a></h6>
                        <h5><i class="fa fa-rupee"></i>30.00</h5>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6 mix vegetables fresh-meat">
                <div class="featured__item">
                    <div class="featured__item__pic set-bg" data-setbg="assets/img/featured/feature-3.jpg">
                        <ul class="featured__item__pic__hover">
                            <li><a href="#"><i class="fa fa-retweet"></i></a></li>
                            <li><a href="#"><i class="fa fa-shopping-cart"></i></a></li>
                        </ul>
                    </div>
                    <div class="featured__item__text">
                        <h6><a href="shop-details.html">Idli Sambar</a></h6>
                        <h5><i class="fa fa-rupee"></i>30.00</h5>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6 mix fastfood oranges">
                <div class="featured__item">
                    <div class="featured__item__pic set-bg" data-setbg="assets/img/featured/feature-4.jpg">
                        <ul class="featured__item__pic__hover">
                            <li><a href="#"><i class="fa fa-retweet"></i></a></li>
                            <li><a href="#"><i class="fa fa-shopping-cart"></i></a></li>
                        </ul>
                    </div>
                    <div class="featured__item__text">
                        <h6><a href="shop-details.html">Noodles</a></h6>
                        <h5><i class="fa fa-rupee"></i>30.00</h5>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6 mix fresh-meat vegetables">
                <div class="featured__item">
                    <div class="featured__item__pic set-bg" data-setbg="assets/img/featured/feature-5.jpg">
                        <ul class="featured__item__pic__hover">
                            <li><a href="#"><i class="fa fa-retweet"></i></a></li>
                            <li><a href="#"><i class="fa fa-shopping-cart"></i></a></li>
                        </ul>
                    </div>
                    <div class="featured__item__text">
                        <h6><a href="shop-details.html">Veg Spring Roll</a></h6>
                        <h5><i class="fa fa-rupee"></i>30.00</h5>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6 mix oranges fastfood">
                <div class="featured__item">
                    <div class="featured__item__pic set-bg" data-setbg="assets/img/featured/feature-6.jpg">
                        <ul class="featured__item__pic__hover">
                            <li><a href="#"><i class="fa fa-retweet"></i></a></li>
                            <li><a href="#"><i class="fa fa-shopping-cart"></i></a></li>
                        </ul>
                    </div>
                    <div class="featured__item__text">
                        <h6><a href="shop-details.html">Green Salad</a></h6>
                        <h5><i class="fa fa-rupee"></i>30.00</h5>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6 mix fresh-meat vegetables">
                <div class="featured__item">
                    <div class="featured__item__pic set-bg" data-setbg="assets/img/featured/feature-7.jpg">
                        <ul class="featured__item__pic__hover">
                            <li><a href="#"><i class="fa fa-retweet"></i></a></li>
                            <li><a href="#"><i class="fa fa-shopping-cart"></i></a></li>
                        </ul>
                    </div>
                    <div class="featured__item__text">
                        <h6><a href="shop-details.html">Momos</a></h6>
                        <h5><i class="fa fa-rupee"></i>30.00</h5>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6 mix fastfood vegetables">
                <div class="featured__item">
                    <div class="featured__item__pic set-bg" data-setbg="assets/img/featured/feature-8.jpg">
                        <ul class="featured__item__pic__hover">
                            <li><a href="#"><i class="fa fa-retweet"></i></a></li>
                            <li><a href="#"><i class="fa fa-shopping-cart"></i></a></li>
                        </ul>
                    </div>
                    <div class="featured__item__text">
                        <h6><a href="shop-details.html">French Fries</a></h6>
                        <h5><i class="fa fa-rupee"></i>30.00</h5>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Checkout Section End -->